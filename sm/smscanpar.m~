function scan = smscanpar(scan, cntr, rng, npoints, loops)

if nargin < 5
    loops = 1:length(scan.loops);
end

if ~isempty(cntr)
    for i = 1:length(loops)
        scan.loops(loops(i)).rng =  scan.loops(loops(i)).rng - mean(scan.loops(loops(i)).rng) + cntr(i);
    end
end

if nargin >=3 && ~isempty(rng)
    for i = 1:length(loops)
        scan.loops(loops(i)).rng =  mean(scan.loops(loops(i)).rng) + rng(i) * [-.5 .5];
    end
end

if nargin >=4 && ~isempty(npoints)
    for i = 1:length(loops)
        scan.loops(loops(i)).npoints =  npoints(i);
    end
end